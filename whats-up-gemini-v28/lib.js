function w(){const e={},M=Object.keys(window.require("__debug")?.modulesMap||{});function t(a){try{return window.ErrorGuard?.skipGuardGlobal(!0),window.importNamespace(a)}catch(r){throw r}finally{window.ErrorGuard.skipGuardGlobal(!1)}}return M.forEach(a=>{!a.startsWith("WAWebL10NConstants")&&!a.startsWith("WAWebMoment")&&(e[a]=()=>t(a))}),e}window.cometModuleRaid=w;const A=()=>parseInt(window.Debug?.VERSION?.split(".")?.[1])>=3e3?Object.keys(window.require("__debug").modulesMap).length>0:window.webpackChunkbuild||window.webpackChunkwhatsapp_web_client,u=function(){u.mID=Math.random().toString(36).substring(7),u.mObj={};const e=parseInt(window.Debug?.VERSION?.split(".")?.[1])>=3e3;(function(){if(e){u.mObj=w();return}(window.webpackChunkbuild||window.webpackChunkwhatsapp_web_client).push([[u.mID],{},function(r){Object.keys(r.m).forEach(function(o){u.mObj[o]=r(o)})}])})();let t=function(o){try{return u.mObj[o]}catch(s){console.error(`Failed to get module with id ${o}: `,s)}},a=function(o){let s=[];try{Object.keys(u.mObj).forEach(function(l){let i=u.mObj[l];if(typeof i=="function")try{let S=i();S&&(i=S)}catch{}if(typeof i<"u")if(typeof o=="string"){if(typeof i.default=="object")for(var f in i.default)f==o&&s.push(i);for(var p in i)p==o&&s.push(i)}else if(typeof o=="function")o(i)&&s.push(i);else throw new TypeError("findModule can only find via string and function, "+typeof o+" was passed")})}catch(n){console.error("Failed to find module: ",n)}return s};return{modules:u.mObj,constructors:u.cArr,findModule:a,get:t}},J=()=>{u.mID=Math.random().toString(36).substring(7),u.mObj={};try{window.mR=u(),window._moduleRaid=u}catch(t){console.error("Failed to initialize moduleRaid: ",t)}const e=window;e.ExposeStore=(()=>{try{e.mR=e._moduleRaid(),e.Store=Object.assign({},window.mR.findModule(r=>r.default&&r.default.Chat)[0].default);let t=[];t.push(()=>e.Store.Conn=e.mR.findModule("Conn")[0].Conn),t.push(()=>e.Store.BlockContact=e.mR.findModule("blockContact")[0]),t.push(()=>e.Store.Cmd=e.mR.findModule("Cmd")[0].Cmd),t.push(()=>e.Store.CryptoLib=e.mR.findModule("decryptE2EMedia")[0]),t.push(()=>e.Store.DownloadManager=e.mR.findModule("downloadManager")[0].downloadManager),t.push(()=>e.Store.GroupMetadata=e.mR.findModule("GroupMetadata")[0].default.GroupMetadata),t.push(()=>e.Store.Invite=e.mR.findModule("sendJoinGroupViaInvite")[0]),t.push(()=>e.Store.InviteInfo=e.mR.findModule("sendQueryGroupInvite")[0]),t.push(()=>e.Store.Label=e.mR.findModule("LabelCollection")[0].LabelCollection),t.push(()=>e.Store.MediaPrep=e.mR.findModule("MediaPrep")[0]),t.push(()=>e.Store.MediaObject=e.mR.findModule("getOrCreateMediaObject")[0]),t.push(()=>e.Store.NumberInfo=e.mR.findModule("formattedPhoneNumber")[0]),t.push(()=>e.Store.MediaTypes=e.mR.findModule("msgToMediaType")[0]),t.push(()=>e.Store.MediaUpload=e.mR.findModule("uploadMedia")[0]),t.push(()=>e.Store.MsgKey=e.mR.findModule(r=>r.default&&r.default.fromString)[0].default),t.push(()=>e.Store.MessageInfo=e.mR.findModule("sendQueryMsgInfo")[0]),t.push(()=>e.Store.OpaqueData=e.mR.findModule(r=>r.default&&r.default.createFromData)[0].default),t.push(()=>e.Store.QueryProduct=e.mR.findModule("queryProduct")[0]),t.push(()=>e.Store.QueryOrder=e.mR.findModule("queryOrder")[0]),t.push(()=>e.Store.SendClear=e.mR.findModule("sendClear")[0]),t.push(()=>e.Store.SendDelete=e.mR.findModule("sendDelete")[0]),t.push(()=>e.Store.SendMessage=e.mR.findModule("addAndSendMsgToChat")[0]),t.push(()=>e.Store.EditMessage=e.mR.findModule("addAndSendMessageEdit")[0]),t.push(()=>e.Store.SendSeen=e.mR.findModule("sendSeen")[0]),t.push(()=>e.Store.User=e.mR.findModule("getMaybeMeUser")[0]),t.push(()=>e.Store.UploadUtils=e.mR.findModule(r=>r.default&&r.default.encryptAndUpload?r.default:null)[0].default),t.push(()=>e.Store.UserConstructor=e.mR.findModule(r=>r.default&&r.default.prototype&&r.default.prototype.isServer&&r.default.prototype.isUser?r.default:null)[0].default),t.push(()=>e.Store.Validators=e.mR.findModule("findLinks")[0]),t.push(()=>e.Store.VCard=e.mR.findModule("vcardFromContactModel")[0]),t.push(()=>e.Store.WidFactory=e.mR.findModule("createWid")[0]),t.push(()=>e.Store.ProfilePic=e.mR.findModule("profilePicResync")[0]),t.push(()=>e.Store.PresenceUtils=e.mR.findModule("sendPresenceAvailable")[0]),t.push(()=>e.Store.ChatState=e.mR.findModule("sendChatStateComposing")[0]),t.push(()=>e.Store.GroupParticipants=e.mR.findModule("sendPromoteParticipants")[0]),t.push(()=>e.Store.JoinInviteV4=e.mR.findModule("sendJoinGroupViaInviteV4")[0]),t.push(()=>e.Store.findCommonGroups=e.mR.findModule("findCommonGroups")[0]?.findCommonGroups),t.push(()=>e.Store.StatusUtils=e.mR.findModule("setMyStatus")[0]),t.push(()=>e.Store.ConversationMsgs=e.mR.findModule("loadEarlierMsgs")[0]),t.push(()=>e.Store.sendReactionToMsg=e.mR.findModule("sendReactionToMsg")[0]?.sendReactionToMsg),t.push(()=>e.Store.createOrUpdateReactionsModule=e.mR.findModule("createOrUpdateReactions")[0]),t.push(()=>e.Store.EphemeralFields=e.mR.findModule("getEphemeralFields")[0]),t.push(()=>{let r;e.Store.QueryExist=(r=e.mR.findModule("queryExists")[0])?r.queryExists:e.mR.findModule("queryExist")[0].queryWidExists}),t.push(()=>{let r;e.Store.ReplyUtils=(r=e.mR.findModule("canReplyMsg")).length>0&&r[0]}),t.push(()=>{let r;e.Store.getMsgInfo=(window.mR.findModule("sendQueryMsgInfo")[0]||{}).sendQueryMsgInfo||e.mR.findModule("queryMsgInfo")[0].queryMsgInfo}),t.push(()=>e.Store.ReplyUtils=e.mR.findModule("canReplyMsg").length>0&&e.mR.findModule("canReplyMsg")[0]),t.push(()=>e.Store.MsgActionChecks=e.mR.findModule("canSenderRevokeMsg")[0]),t.push(()=>e.Store.QuotedMsg=e.mR.findModule("getQuotedMsgObj")[0]),t.push(()=>e.Store.Socket=e.mR.findModule("deprecatedSendIq")[0]),t.push(()=>e.Store.SearchContext=e.mR.findModule("getSearchContext")[0].getSearchContext),t.push(()=>e.Store.SocketWap=e.mR.findModule("wap")[0]),t.push(()=>e.Store.StickerTools={...e.mR.findModule("toWebpSticker")[0],...e.mR.findModule("addWebpMetadata")[0]}),t.push(()=>e.Store.GroupUtils={...e.mR.findModule("sendCreateGroup")[0],...e.mR.findModule("sendSetGroupSubject")[0],...e.mR.findModule("markExited")[0]}),t.push(()=>e.Store.ChannelUtils={...e.require("WAWebLoadNewsletterPreviewChatAction"),...e.require("WAWebNewsletterMetadataQueryJob"),...e.require("WAWebNewsletterCreateQueryJob"),...e.require("WAWebEditNewsletterMetadataAction"),...e.require("WAWebNewsletterDeleteAction"),...e.require("WAWebNewsletterSubscribeAction"),...e.require("WAWebNewsletterUnsubscribeAction"),...e.require("WAWebNewsletterDirectorySearchAction"),...e.require("WAWebNewsletterToggleMuteStateJob"),...e.require("WAWebNewsletterGatingUtils"),...e.require("WAWebNewsletterModelUtils"),...e.require("WAWebMexAcceptNewsletterAdminInviteJob"),...e.require("WAWebMexRevokeNewsletterAdminInviteJob"),...e.require("WAWebChangeNewsletterOwnerAction"),...e.require("WAWebDemoteNewsletterAdminAction"),...e.require("WAWebNewsletterDemoteAdminJob"),countryCodesIso:e.require("WAWebCountriesNativeCountryNames"),currentRegion:e.require("WAWebL10N").getRegion()}),e.Store.Chat._find||t.push(()=>{e.Store.Chat._find=r=>{const o=e.Store.Chat.get(r);return o?Promise.resolve(o):Promise.resolve({id:r})},e.Store.Chat.findImpl=e.Store.Chat._find});for(const r of t)try{r()}catch(o){console.error("Fail to load module: "+o)}try{e.Store.LinkPreview=window.require("WAWebLinkPreviewChatAction")}catch(r){console.error(r)}try{e.Store.User||(e.Store.User=window.require("WAWebUserPrefsMeUser"))}catch(r){console.error(r)}const a=e.mR.findModule("isMDBackend");a&&a[0]&&a[0].isMDBackend?e.Store.MDBackend=a[0].isMDBackend():e.Store.MDBackend=!0}catch(t){throw console.error(t),t}})(),(()=>{e.WWebJS={},e.WWebJS.sendSeen=async t=>{let a=e.Store.Chat.get(t);return a!==void 0?(await e.Store.SendSeen.sendSeen(a,!1),!0):!1},e.WWebJS.sendMessage=async(t,a,r)=>{let o=r||{};r.attachment&&(o=r.sendMediaAsSticker?await e.WWebJS.processStickerData(r.attachment):await e.WWebJS.processMediaData(r.attachment,{forceVoice:r.sendAudioAsVoice,forceDocument:r.sendMediaAsDocument,forceGif:r.sendVideoAsGif}),r.caption&&(o.caption=r.caption),a=r.sendMediaAsSticker?void 0:o.preview,o.isViewOnce=r.isViewOnce,delete r.attachment,delete r.sendMediaAsSticker);let s={};if(r.quotedMessageId){let d=e.Store.Msg.get(r.quotedMessageId);(e.Store.ReplyUtils?e.Store.ReplyUtils.canReplyMsg(d.unsafe()):d.canReply())&&(s=d.msgContextInfo(t)),delete r.quotedMessageId}r.mentionedJidList&&(r.mentionedJidList=r.mentionedJidList.map(d=>e.Store.Contact.get(d).id));let n={};r.location&&(n={type:"location",loc:r.location.description,lat:r.location.latitude,lng:r.location.longitude},delete r.location);let l={};if(r.contactCard){let d=e.Store.Contact.get(r.contactCard);l={body:e.Store.VCard.vcardFromContactModel(d).vcard,type:"vcard",vcardFormattedName:d.formattedName},delete r.contactCard}else if(r.contactCardList)l={type:"multi_vcard",vcardList:r.contactCardList.map(h=>e.Store.Contact.get(h)).map(h=>e.Store.VCard.vcardFromContactModel(h)),body:void 0},delete r.contactCardList;else if(r.parseVCards&&typeof a=="string"&&a.startsWith("BEGIN:VCARD")){delete r.parseVCards;try{const d=e.Store.VCard.parseVcard(a);d&&(l={type:"vcard",vcardFormattedName:e.Store.VCard.vcardGetNameFromParsed(d)})}catch{}}if(r.linkPreview){delete r.linkPreview;const d=e.Store.Validators.findLink(a);if(d){let m=await e.Store.LinkPreview.getLinkPreview(d);m&&m.data&&(m=m.data,m.preview=!0,m.subtype="url",r={...r,...m})}}let i={};if(r.buttons){let d;r.buttons.type==="chat"?(a=r.buttons.body,d=a):d=r.caption?r.caption:" ",i={productHeaderImageRejected:!1,isFromTemplate:!1,isDynamicReplyButtonsMsg:!0,title:r.buttons.title?r.buttons.title:void 0,footer:r.buttons.footer?r.buttons.footer:void 0,dynamicReplyButtons:r.buttons.buttons,replyButtons:r.buttons.buttons,caption:d},delete r.buttons}let f={};if(r.list){if(e.Store.Conn.platform==="smba"||e.Store.Conn.platform==="smbi")throw"[LT01] Whatsapp business can't send this yet";f={type:"list",footer:r.list.footer,list:{...r.list,listType:1},body:r.list.description},delete r.list,delete f.list.footer}const p=e.Store.User.getMaybeMeLidUser(),S=e.Store.User.getMaybeMePnUser(),c=await e.Store.MsgKey.newId();let b=t.id.isLid()?p:S,y;typeof t.id?.isGroup=="function"&&t.id.isGroup()&&(b=t.groupMetadata&&t.groupMetadata.isLidAddressingMode?p:S,y=e.Store.WidFactory.asUserWidOrThrow(b));const g=new e.Store.MsgKey({from:b,to:t.id,id:c,participant:y,selfDir:"out"}),W=r.extraOptions||{};delete r.extraOptions;const C=e.Store.EphemeralFields.getEphemeralFields(t),R={...r,id:g,ack:0,body:a,from:b,to:t.id,local:!0,self:"out",t:new Date().getTime()/1e3,isNewMsg:!0,type:"chat",...C,...n,...o,...o.toJSON?o.toJSON():{},...s,...l,...i,...f,...W};return await e.Store.SendMessage.addAndSendMsgToChat(t,R),e.Store.Msg.get(g._serialized)},e.WWebJS.toStickerData=async t=>{if(t.mimetype=="image/webp")return t;const a=e.WWebJS.mediaInfoToFile(t),o=await(await e.Store.StickerTools.toWebpSticker(a)).arrayBuffer();return{mimetype:"image/webp",data:e.WWebJS.arrayBufferToBase64(o)}},e.WWebJS.processStickerData=async t=>{if(t.mimetype!=="image/webp")throw new Error("Invalid media type");const a=e.WWebJS.mediaInfoToFile(t);let r=await e.WWebJS.getFileHash(a),o=await e.WWebJS.generateHash(32);const s=new AbortController,n=await e.Store.UploadUtils.encryptAndUpload({blob:a,type:"sticker",signal:s.signal,mediaKey:o});return{...n,clientUrl:n.url,deprecatedMms3Url:n.url,uploadhash:n.encFilehash,size:a.size,type:"sticker",filehash:r}},e.WWebJS.processMediaData=async(t,{forceVoice:a,forceDocument:r,forceGif:o})=>{const s=e.WWebJS.mediaInfoToFile(t),n=e.Store.OpaqueData.createFromData(s,s.type),i=await e.Store.MediaPrep.prepRawMedia(n,{asDocument:r}).waitForPrep(),f=e.Store.MediaObject.getOrCreateMediaObject(i.filehash),p=e.Store.MediaTypes.msgToMediaType({type:i.type,isGif:i.isGif});a&&i.type==="audio"&&(i.type="ptt"),o&&i.type==="video"&&(i.isGif=!0),r&&(i.type="document"),i.mediaBlob instanceof e.Store.OpaqueData||(i.mediaBlob=await e.Store.OpaqueData.createFromData(i.mediaBlob,i.mediaBlob.type)),i.renderableUrl=i.mediaBlob.url(),f.consolidate(i.toJSON()),i.mediaBlob.autorelease();const c=(await e.Store.MediaUpload.uploadMedia({mimetype:i.mimetype,mediaObject:f,mediaType:p})).mediaEntry;if(!c)throw new Error("upload failed: media entry was not created");return i.set({clientUrl:c.mmsUrl,deprecatedMms3Url:c.deprecatedMms3Url,directPath:c.directPath,mediaKey:c.mediaKey,mediaKeyTimestamp:c.mediaKeyTimestamp,filehash:f.filehash,encFilehash:c.encFilehash,uploadhash:c.uploadHash,size:f.size,streamingSidecar:c.sidecar,firstFrameSidecar:c.firstFrameSidecar}),i},e.WWebJS.getMessageModel=t=>{const a=t.serialize();return a.isEphemeral=t.isEphemeral,a.isStatusV3=t.isStatusV3,a.links=t.getRawLinks().map(r=>({link:r.href,isSuspicious:!!(r.suspiciousCharacters&&r.suspiciousCharacters.size)})),a.buttons&&(a.buttons=a.buttons.serialize()),a.dynamicReplyButtons&&(a.dynamicReplyButtons=JSON.parse(JSON.stringify(a.dynamicReplyButtons))),a.replyButtons&&(a.replyButtons=JSON.parse(JSON.stringify(a.replyButtons))),typeof a.id.remote=="object"&&(a.id=Object.assign({},a.id,{remote:a.id.remote._serialized})),delete a.pendingAckUpdate,a},e.WWebJS.getChatModel=async t=>{let a=t.serialize();if(a.isGroup=t.isGroup,a.formattedTitle=t.formattedTitle,a.isMuted=t.mute&&t.mute.isMuted,t.groupMetadata){const r=e.Store.WidFactory.createWid(t.id._serialized);await e.Store.GroupMetadata.update(r),a.groupMetadata=t.groupMetadata.serialize()}return delete a.msgs,delete a.msgUnsyncedButtonReplyMsgs,delete a.unsyncedButtonReplies,a},e.WWebJS.getChat=async t=>{const a=e.Store.WidFactory.createWid(t),r=await e.Store.Chat.find(a);return await e.WWebJS.getChatModel(r)},e.WWebJS.getChats=async()=>{const a=e.Store.Chat.getModelsArray().map(r=>e.WWebJS.getChatModel(r));return Promise.all(a)},e.WWebJS.getContactModel=t=>{let a=t.serialize();return a.isBusiness=t.isBusiness,t.businessProfile&&(a.businessProfile=t.businessProfile.serialize()),a.isMe=t.isMe,a.isUser=t.isUser,a.isGroup=t.isGroup,a.isWAContact=t.isWAContact,a.isMyContact=t.isMyContact,a.isBlocked=t.isContactBlocked,a.userid=t.userid,a},e.WWebJS.getContact=async t=>{const a=e.Store.WidFactory.createWid(t),r=await e.Store.Contact.find(a);return e.WWebJS.getContactModel(r)},e.WWebJS.getContacts=()=>e.Store.Contact.getModelsArray().map(a=>e.WWebJS.getContactModel(a)),e.WWebJS.mediaInfoToFile=({data:t,mimetype:a,filename:r})=>{const o=e.atob(t),s=new ArrayBuffer(o.length),n=new Uint8Array(s);for(let i=0;i<o.length;i++)n[i]=o.charCodeAt(i);const l=new Blob([s],{type:a});return new File([l],r,{type:a,lastModified:Date.now()})},e.WWebJS.arrayBufferToBase64=t=>{let a="";const r=new Uint8Array(t),o=r.byteLength;for(let s=0;s<o;s++)a+=String.fromCharCode(r[s]);return e.btoa(a)},e.WWebJS.arrayBufferToBase64Async=t=>new Promise((a,r)=>{const o=new Blob([t],{type:"application/octet-stream"}),s=new FileReader;s.onload=()=>{const[,n]=(s?.result).split(",");a(n)},s.onerror=n=>r(n),s.readAsDataURL(o)}),e.WWebJS.getFileHash=async t=>{const a=await crypto.subtle.digest("SHA-256",t.arrayBuffer());return btoa(String.fromCharCode(...new Uint8Array(a)))},e.WWebJS.generateHash=async t=>{for(var a="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=r.length,s=0;s<t;s++)a+=r.charAt(Math.floor(Math.random()*o));return a},e.WWebJS.sendClearChat=async t=>{let a=e.Store.Chat.get(t);return a!==void 0?(await e.Store.SendClear.sendClear(a,!1),!0):!1},e.WWebJS.sendDeleteChat=async t=>{let a=e.Store.Chat.get(t);return a!==void 0?(await e.Store.SendDelete.sendDelete(a),!0):!1},e.WWebJS.sendChatstate=async(t,a)=>{switch(e.Store.MDBackend&&(a=e.Store.WidFactory.createWid(a)),t){case"typing":await e.Store.ChatState.sendChatStateComposing(a);break;case"recording":await e.Store.ChatState.sendChatStateRecording(a);break;case"stop":await e.Store.ChatState.sendChatStatePaused(a);break;default:throw new Error("Invalid chatstate")}return!0},e.WWebJS.getLabelModel=t=>{let a=t.serialize();return a.hexColor=t.hexColor,a},e.WWebJS.getCurrentUserBusinessProfile=()=>{try{const a=e.Store.User.getMaybeMeUser()?.user+"@c.us",r=e.Store.BusinessProfile._index[a];if(!r||!r.isValid())return null;const o=r.serialize();let s=null,n=null;try{const l=e.Store.Contact.get(a);l&&(n=l.getProfilePicThumb()?.__x_eurl||null)}catch(l){console.error("Error getting profile pic:",l)}return{...o,profilePicUrl:n,businessHours:s}}catch(t){console.error("Error getting business profile:",t);return null}},e.WWebJS.getBusinessProfile=async t=>{try{const a=e.Store.BusinessProfile.get(t);if(!a||!a.isValid())return null;const r=a.serialize();let o=null,s=null;try{const n=e.Store.Contact.get(t);n&&(s=n.getProfilePicThumb()?.__x_eurl||null)}catch(n){console.error("Error getting profile pic:",n)}return{...r,profilePicUrl:s,businessHours:o}}catch(t){console.error("Error getting business profile:",t);return null}}})()};

// Initialize the lib.js functionality
console.log("[lib.js] Initializing WhatsApp Store exposure...");
try {
  J();
  console.log("[lib.js] Initialization completed successfully");
} catch (error) {
  console.error("[lib.js] Initialization failed:", error);
}

